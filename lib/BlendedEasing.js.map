{"version":3,"sources":["../src/BlendedEasing.js"],"names":["BlendedEasing","options","easingA","offset","to","easingB","validateOptions","slope","getSlope","from","BezierCurve","easing","Easing","deltaX","rise","valueAt","run","percentage","fromPercentage","fromValue","adjustedPercentage","toValue","getFromValue","Error"],"mappings":";;;;;;;AAAA;;AACA;;;;;;;;;;IAEqBA,a;;;AACnB,yBAAYC,OAAZ,EAAqB;AAAA;;AACnBA,IAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AACA,SAAKC,OAAL,GAAeD,OAAO,CAACC,OAAvB;AACA,SAAKC,MAAL,GAAcF,OAAO,CAACE,MAAtB;AACA,SAAKC,EAAL,GAAUH,OAAO,CAACI,OAAlB;AAEA,SAAKC,eAAL;AAEA,SAAKC,KAAL,GAAa,KAAKC,QAAL,EAAb;AACA,SAAKC,IAAL,GAAY,IAAIC,oBAAJ,CAAgB,CAAC,CAAD,EAAI,KAAKH,KAAT,CAAhB,CAAZ;AACA,SAAKI,MAAL,GAAc,IAAIC,eAAJ,CAAW,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CAAX,CAAd;AACD,G,CAED;;;;;+BACW;AACT,UAAMC,MAAM,GAAG,IAAf;AAEA,UAAIC,IAAJ;;AAEA,UAAI,KAAKX,MAAL,GAAc,CAAlB,EAAqB;AACnBW,QAAAA,IAAI,GACF,KAAKZ,OAAL,CAAaa,OAAb,CAAqBF,MAAM,GAAG,KAAKV,MAAnC,IACA,KAAKD,OAAL,CAAaa,OAAb,CAAqB,KAAKZ,MAA1B,CAFF;AAGD,OAJD,MAIO;AACLW,QAAAA,IAAI,GAAG,KAAKZ,OAAL,CAAaa,OAAb,CAAqB,CAArB,IAA0B,KAAKb,OAAL,CAAaa,OAAb,CAAqB,IAAIF,MAAzB,CAAjC;AACD;;AAED,UAAMG,GAAG,GAAGH,MAAZ;AAEA,aAAOC,IAAI,GAAGE,GAAd;AACD;;;iCAEYC,U,EAAY;AACvB,UAAMC,cAAc,GAAG,KAAKf,MAAL,GAAcc,UAArC;AACA,UAAIE,SAAJ,CAFuB,CAIvB;;AACA,UAAID,cAAc,IAAI,CAAtB,EAAyB;AACvBC,QAAAA,SAAS,GACP,KAAKjB,OAAL,CAAaa,OAAb,CAAqBG,cAArB,IACA,KAAKhB,OAAL,CAAaa,OAAb,CAAqB,KAAKZ,MAA1B,CAFF;AAGD,OAJD,MAIO;AACLgB,QAAAA,SAAS,GACP,KAAKV,IAAL,CAAUM,OAAV,CAAkBG,cAAc,GAAG,CAAnC,IACA,KAAKhB,OAAL,CAAaa,OAAb,CAAqB,CAArB,CADA,GAEA,KAAKb,OAAL,CAAaa,OAAb,CAAqB,KAAKZ,MAA1B,CAHF;AAID;;AAED,aAAOgB,SAAP;AACD;;;4BAEOF,U,EAAY;AAClB,UAAMG,kBAAkB,GAAG,KAAKT,MAAL,CAAYI,OAAZ,CAAoBE,UAAU,GAAG,IAAjC,CAA3B;AACA,UAAMI,OAAO,GAAG,KAAKjB,EAAL,CAAQW,OAAR,CAAgBE,UAAhB,CAAhB;AACA,UAAME,SAAS,GAAG,KAAKG,YAAL,CAAkBL,UAAlB,CAAlB;;AAEA,UAAIA,UAAU,GAAG,IAAjB,EAAuB;AACrB,eAAOE,SAAS,GAAG,CAACE,OAAO,GAAGF,SAAX,IAAwBC,kBAA3C;AACD,OAFD,MAEO;AACL,eAAOC,OAAP;AACD;AACF;;;sCAEiB;AAChB,UACE,OAAO,KAAKnB,OAAL,CAAaa,OAApB,KAAgC,UAAhC,IACA,OAAO,KAAKX,EAAL,CAAQW,OAAf,KAA2B,UAF7B,EAGE;AACA,cAAM,IAAIQ,KAAJ,CACJ,2DADI,CAAN;AAGD;AACF","sourcesContent":["import BezierCurve from \"./BezierCurve.js\";\nimport Easing from \"./Easing.js\";\n\nexport default class BlendedEasing {\n  constructor(options) {\n    options = options || {};\n    this.easingA = options.easingA;\n    this.offset = options.offset;\n    this.to = options.easingB;\n\n    this.validateOptions();\n\n    this.slope = this.getSlope();\n    this.from = new BezierCurve([0, this.slope]);\n    this.easing = new Easing([0, 0, 0, 1, 1, 1, 1, 1]);\n  }\n\n  // Use differential calculas to get slope.\n  getSlope() {\n    const deltaX = 0.01;\n\n    let rise;\n\n    if (this.offset < 1) {\n      rise =\n        this.easingA.valueAt(deltaX + this.offset) -\n        this.easingA.valueAt(this.offset);\n    } else {\n      rise = this.easingA.valueAt(1) - this.easingA.valueAt(1 - deltaX);\n    }\n\n    const run = deltaX;\n\n    return rise / run;\n  }\n\n  getFromValue(percentage) {\n    const fromPercentage = this.offset + percentage;\n    let fromValue;\n\n    // Get the value from the easing until it finishes then use the slope easing.\n    if (fromPercentage <= 1) {\n      fromValue =\n        this.easingA.valueAt(fromPercentage) -\n        this.easingA.valueAt(this.offset);\n    } else {\n      fromValue =\n        this.from.valueAt(fromPercentage - 1) +\n        this.easingA.valueAt(1) -\n        this.easingA.valueAt(this.offset);\n    }\n\n    return fromValue;\n  }\n\n  valueAt(percentage) {\n    const adjustedPercentage = this.easing.valueAt(percentage / 0.25);\n    const toValue = this.to.valueAt(percentage);\n    const fromValue = this.getFromValue(percentage);\n\n    if (percentage < 0.25) {\n      return fromValue + (toValue - fromValue) * adjustedPercentage;\n    } else {\n      return toValue;\n    }\n  }\n\n  validateOptions() {\n    if (\n      typeof this.easingA.valueAt !== \"function\" ||\n      typeof this.to.valueAt !== \"function\"\n    ) {\n      throw new Error(\n        \"Both easingA and easingB need to have a valueAt function.\"\n      );\n    }\n  }\n}\n"],"file":"BlendedEasing.js"}