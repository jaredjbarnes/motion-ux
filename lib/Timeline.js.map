{"version":3,"sources":["../src/Timeline.js"],"names":["defaultClock","DefaultClock","Timeline","Scrubber","repeatDirections","animations","duration","clock","adjustmentAnimators","render","bind","scrubber","animators","AnimatorCreator","getAnimators","play","reverse","stop","progress","seek","filter","animator","options","startAt","forEach","target","name","min","Math","max","endAt","observeTime","apply","arguments","observe","value","timeScale","repeat","repeatDirection"],"mappings":"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","sourcesContent":["import DefaultClock from \"./DefaultClock.js\";\nimport TimelineOption from \"./TimelineOption.js\";\nimport Scrubber from \"./Scrubber.js\";\nimport AnimatorCreator from \"./AnimatorCreator.js\";\n\nconst defaultClock = new DefaultClock();\n\nexport default class Timeline {\n  static get repeatDirections() {\n    return Scrubber.repeatDirections;\n  }\n\n  constructor({ animations, duration, clock = defaultClock }) {\n    this.clock = clock;\n    this.adjustmentAnimators = [];\n    this.render = this.render.bind(this);\n    this.scrubber = new Scrubber({\n      clock,\n      duration,\n      render: this.render\n    });\n    this.duration = duration;\n    this.animators = new AnimatorCreator(animations).getAnimators();\n  }\n\n  get duration() {\n    return this.scrubber.duration;\n  }\n\n  set duration(value) {\n    this.scrubber.duration = value;\n  }\n\n  get timeScale() {\n    return this.scrubber.timeScale;\n  }\n\n  set timeScale(value) {\n    this.scrubber.timeScale = value;\n  }\n\n  get repeat() {\n    return this.scrubber.repeat;\n  }\n\n  set repeat(value) {\n    this.scrubber.repeat = value;\n  }\n\n  get repeatDirection() {\n    return this.scrubber.repeatDirection;\n  }\n\n  set repeatDirection(value) {\n    this.scrubber.repeatDirection = value;\n  }\n\n  play() {\n    this.scrubber.play();\n  }\n\n  reverse() {\n    this.scrubber.reverse();\n  }\n\n  stop() {\n    this.scrubber.stop();\n  }\n\n  seek(progress) {\n    this.scrubber.seek(progress);\n  }\n\n  render() {\n    const progress = this.scrubber.progress;\n\n    this.animators\n      .filter(animator => {\n        return animator.options.startAt <= progress;\n      })\n      .forEach(animator =>\n        (animator.options.target[animator.options.name] = animator.render(this.scrubber.progress, this.duration))\n      );\n\n    this.animators\n      .filter(animator => {\n        const min = Math.max(animator.options.startAt, progress);\n        const max = Math.min(animator.options.endAt, progress);\n\n        return min <= max;\n      })\n      .forEach(\n        animator =>\n          (animator.options.target[animator.options.name] = animator.render(\n            this.scrubber.progress,\n            this.duration\n          ))\n      );\n  }\n\n  observeTime() {\n    this.scrubber.observeTime.apply(this.scrubber, arguments);\n  }\n\n  observe() {\n    this.scrubber.observe.apply(this.scrubber, arguments);\n  }\n}\n"],"file":"Timeline.js"}