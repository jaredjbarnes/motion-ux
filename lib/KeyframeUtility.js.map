{"version":3,"sources":["../src/KeyframeUtility.js"],"names":["validator","KeyframeConfigValidator","KeyframeUtility","config","result","setConfig","_setConfig","_normalizeName","_normalizeProperty","_normalizeValue","_normalizeFrom","_normalizeControls","_normalizeTo","_normalizeStartAt","_normalizeEndAt","_normalizeEasing","name","property","value","to","from","hasValidFromAsString","ParsedValue","validateFromAsString","Array","isArray","controls","hasValidControlsAsStrings","map","control","validateControlsAsStrings","hasValidToAsString","validateToAsString","hasValidStartAt","startAt","hasValidEndAt","endAt","hasValidEasingString","hasValidEasingFunction","easing","easings","linear"],"mappings":"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","sourcesContent":["import easings from \"./easings.js\";\nimport KeyframeConfigValidator from \"./KeyframeConfigValidator.js\";\nimport ParsedValue from \"./ParsedValue.js\";\n\nconst validator = new KeyframeConfigValidator();\n\nexport default class KeyframeUtility {\n  constructor() {\n    this.config = null;\n  }\n\n  _setConfig(config) {\n    this.config = config;\n    this.result = {};\n    validator.setConfig(config);\n  }\n\n  normalizeConfig(config) {\n    this._setConfig(config);\n    this._normalizeName();\n    this._normalizeProperty();\n    this._normalizeValue();\n    this._normalizeFrom();\n    this._normalizeControls();\n    this._normalizeTo();\n    this._normalizeStartAt();\n    this._normalizeEndAt();\n    this._normalizeEasing();\n\n    return this.result;\n  }\n\n  _normalizeName() {\n    this.result.name = this.config.name;\n  }\n\n  _normalizeProperty() {\n    this.result.property = this.config.property;\n  }\n\n  _normalizeValue() {\n    if (this.config.value != null) {\n      this.config.to = this.config.value;\n      this.config.from = this.config.value;\n    }\n  }\n\n  _normalizeFrom() {\n    if (validator.hasValidFromAsString()) {\n      this.result.from = new ParsedValue(this.config.from);\n    } else {\n      validator.validateFromAsString();\n    }\n  }\n\n  _normalizeControls() {\n    if (!Array.isArray(this.config.controls)) {\n      this.config.controls = [];\n    }\n\n    if (validator.hasValidControlsAsStrings()) {\n      this.result.controls = this.config.controls.map(\n        (control) => new ParsedValue(control)\n      );\n    } else {\n      validator.validateControlsAsStrings();\n    }\n  }\n\n  _normalizeTo() {\n    if (validator.hasValidToAsString()) {\n      this.result.to = new ParsedValue(this.config.to);\n    } else {\n      validator.validateToAsString();\n    }\n  }\n\n  _normalizeStartAt() {\n    if (validator.hasValidStartAt()) {\n      this.result.startAt = this.config.startAt;\n    } else {\n      this.result.startAt = 0;\n    }\n  }\n\n  _normalizeEndAt() {\n    if (validator.hasValidEndAt()) {\n      this.result.endAt = this.config.endAt;\n    } else {\n      this.result.endAt = 1;\n    }\n  }\n\n  _normalizeEasing() {\n    if (\n      !validator.hasValidEasingString() &&\n      !validator.hasValidEasingFunction()\n    ) {\n      this.result.easing = easings.linear;\n    } else if (validator.hasValidEasingString()) {\n      this.result.easing = easings[this.config.easing] || easings.linear;\n    } else if (validator.hasValidEasingFunction()) {\n      this.result.easing = this.config.easing;\n    }\n  }\n}\n"],"file":"KeyframeUtility.js"}