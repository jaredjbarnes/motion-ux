{"version":3,"sources":["../src/DefaultClock.js"],"names":["DefaultClock","registeredCallbacks","Map","_tick","bind","animationFrame","forEach","callback","requestAnimationFrame","set","delete","size","cancelAnimationFrame","performance","now"],"mappings":";;;;;;;;;;;;;IAAqBA,Y;;;AACnB,0BAAc;AAAA;;AACZ,SAAKC,mBAAL,GAA2B,IAAIC,GAAJ,EAA3B;AACA,SAAKC,KAAL,GAAa,KAAKA,KAAL,CAAWC,IAAX,CAAgB,IAAhB,CAAb;AACA,SAAKC,cAAL,GAAsB,IAAtB;AACD;;;;4BAEO;AACN,WAAKJ,mBAAL,CAAyBK,OAAzB,CAAiC,UAAAC,QAAQ,EAAI;AAC3CA,QAAAA,QAAQ;AACT,OAFD;AAIA,WAAKF,cAAL,GAAsBG,qBAAqB,CAAC,KAAKL,KAAN,CAA3C;AACD;;;6BAEQI,Q,EAAU;AACjB,WAAKN,mBAAL,CAAyBQ,GAAzB,CAA6BF,QAA7B,EAAuCA,QAAvC;;AAEA,UAAI,KAAKF,cAAL,IAAuB,IAA3B,EAAiC;AAC/B,aAAKF,KAAL;AACD;AACF;;;+BAEUI,Q,EAAU;AACnB,WAAKN,mBAAL,CAAyBS,MAAzB,CAAgCH,QAAhC;;AAEA,UAAI,KAAKN,mBAAL,CAAyBU,IAAzB,IAAiC,CAArC,EAAwC;AACtCC,QAAAA,oBAAoB,CAAC,KAAKP,cAAN,CAApB;AACA,aAAKA,cAAL,GAAsB,IAAtB;AACD;AACF;;;0BAEK;AACJ,aAAOQ,WAAW,CAACC,GAAZ,EAAP;AACD","sourcesContent":["export default class DefaultClock {\n  constructor() {\n    this.registeredCallbacks = new Map();\n    this._tick = this._tick.bind(this);\n    this.animationFrame = null;\n  }\n\n  _tick() {\n    this.registeredCallbacks.forEach(callback => {\n      callback();\n    });\n\n    this.animationFrame = requestAnimationFrame(this._tick);\n  }\n\n  register(callback) {\n    this.registeredCallbacks.set(callback, callback);\n\n    if (this.animationFrame == null) {\n      this._tick();\n    }\n  }\n\n  unregister(callback) {\n    this.registeredCallbacks.delete(callback);\n\n    if (this.registeredCallbacks.size <= 0) {\n      cancelAnimationFrame(this.animationFrame);\n      this.animationFrame = null;\n    }\n  }\n\n  now() {\n    return performance.now();\n  }\n}\n"],"file":"DefaultClock.js"}