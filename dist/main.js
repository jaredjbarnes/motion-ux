!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.motionUX=e():t.motionUX=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=12)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"CompositeNode",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"ValueNode",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"Cursor",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"RegexValue",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"AndValue",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"AnyOfThese",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"Literal",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"NotValue",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"OptionalValue",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"OrValue",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"RepeatValue",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"ValuePattern",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(e,"AndComposite",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(e,"CompositePattern",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(e,"OptionalComposite",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"OrComposite",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(e,"RepeatComposite",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(e,"ParseError",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(e,"Pattern",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(e,"RecursivePattern",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(e,"ParseInspector",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(e,"TextInspector",{enumerable:!0,get:function(){return P.default}});var r=E(n(8)),i=E(n(9)),o=E(n(4)),s=E(n(10)),a=E(n(14)),u=E(n(15)),l=E(n(16)),c=E(n(17)),h=E(n(18)),f=E(n(5)),d=E(n(19)),p=E(n(20)),y=E(n(3)),v=E(n(21)),m=E(n(6)),g=E(n(7)),b=E(n(22)),_=E(n(23)),w=E(n(2)),k=E(n(1)),O=E(n(24)),x=E(n(25)),P=E(n(26));function E(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n(10))&&r.__esModule?r:{default:r};function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._type=e,this._name=n,this._children=[],this._parent=null,this.isSequence=!1,this._assertName(),this.children=r}var e,n,r;return e=t,(n=[{key:"_assertName",value:function(){if("string"!=typeof this.name)throw new Error("Invalid Argument: Patterns needs to have a name that's a string.")}},{key:"parse",value:function(){throw new Error("Method Not Implemented")}},{key:"exec",value:function(t){var e=new i.default(t),n=this.parse(e);return e.didSuccessfullyParse()?n:null}},{key:"test",value:function(t){return null!=this.exec(t)}},{key:"_assertChildren",value:function(){}},{key:"_cloneChildren",value:function(){var e=this;this._children=this._children.map((function(n){if(!(n instanceof t))throw new Error("The ".concat(e.name," pattern has an invalid child pattern."));return n.clone()})),Object.freeze(this._children)}},{key:"_assignAsParent",value:function(){var t=this;this._children.forEach((function(e){return e.parent=t}))}},{key:"clone",value:function(){throw new Error("Method Not Implemented")}},{key:"getPossibilities",value:function(){throw new Error("Method Not Implemented")}},{key:"getTokens",value:function(){throw new Error("Method Not Implemented")}},{key:"getNextTokens",value:function(){var t=this;if(null!=this._parent){var e=this._parent.children,n=e.findIndex((function(e){return e===t})),r=e[n+1];if(0===this._parent.type.indexOf("repeat")){var i=this._parent.getNextTokens();return 0===n&&e.length>1?r.getTokens().concat(i):1===n?e[0].getTokens().concat(i):this.getTokens().concat(i)}if(0===this._parent.type.indexOf("and")&&null!=r&&0===r.type.indexOf("optional")){for(var o=[],s=n+1;s<e.length;s++){var a=e[s];if(0!==a.type.indexOf("optional")){o=o.concat(a.getTokens());break}o=o.concat(a.getTokens()),s===e.length-1&&(o=o.concat(this._parent.getNextTokens()))}return o}return 0===this._parent.type.indexOf("or")?this._parent.getNextTokens():null!=r?r.getTokens():this._parent.getNextTokens()}return[]}},{key:"getTokenValue",value:function(){return null}},{key:"name",get:function(){return this._name}},{key:"type",get:function(){return this._type}},{key:"parent",get:function(){return this._parent},set:function(e){e instanceof t&&(this._parent=e)}},{key:"children",get:function(){return this._children},set:function(t){this._children=t,this._cloneChildren(),this._assertChildren(),this._assignAsParent()}}])&&o(e.prototype,n),r&&o(e,r),t}();e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.message=e,this.name="ParseError",this.index=n,this.pattern=r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n(1))&&r.__esModule?r:{default:r};function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,u(e).call(this,t,n,r))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,t),n=e,(r=[{key:"_assertChildren",value:function(){if(!Array.isArray(this._children))throw new Error("Invalid Arguments: The patterns argument need to be an array of ValuePattern.");if(!this._children.every((function(t){return t instanceof e||t instanceof i.default})))throw new Error("Invalid Argument: All patterns need to be an instance of ValuePattern.");if("string"!=typeof this.name)throw new Error("Invalid Argument: ValuePatterns needs to have a name that's a string.");if("string"!=typeof this.type)throw new Error("Invalid Argument: ValuePatterns needs to have a type that's a string.")}},{key:"clone",value:function(){throw new Error("Not Yet Implemented")}}])&&s(n.prototype,r),o&&s(n,o),e}(i.default);e.default=c},function(t,e,n){"use strict";var r;function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=function(t){function e(t,n,r){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=s(this,a(e).call(this,t,n,o,u))).value=r,i}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,t),n=e,(r=[{key:"clone",value:function(){return new e(this.type,this.name,this.value,this.startIndex,this.endIndex)}},{key:"filter",value:function(t,e){return t(this,e)?[this]:[]}},{key:"toString",value:function(){return this.value}}])&&o(n.prototype,r),i&&o(n,i),e}(((r=n(8))&&r.__esModule?r:{default:r}).default);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(3)),i=o(n(1));function o(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=u(this,l(e).call(this,"optional-value","optional-value",[t])))._assertArguments(),n}var n,o,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),n=e,(o=[{key:"_assertArguments",value:function(){if(!(this.children[0]instanceof r.default))throw new Error("Invalid Arguments: Expected a ValuePattern.")}},{key:"parse",value:function(t){var e=t.mark(),n=this.children[0].parse(t);return t.hasUnresolvedError()?(t.resolveError(),t.moveToMark(e),null):(t.addMatch(this,n),n)}},{key:"clone",value:function(){return new e(this.children[0])}},{key:"getPossibilities",value:function(t){if(null!=t&&t instanceof i.default||(t=this),this.parent===t){var e=this.children[0].getPossibilities(t);return e.unshift(""),e}return this.children[0].getPossibilities(t)}},{key:"getTokens",value:function(){return this._children[0].getTokens()}}])&&a(n.prototype,o),s&&a(n,s),e}(r.default);e.default=h},function(t,e,n){"use strict";var r;function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=function(t){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,a(e).call(this,t,n,r))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,t),n=e,(r=[{key:"clone",value:function(){throw new Error("Not Yet Implemented")}}])&&o(n.prototype,r),i&&o(n,i),e}(((r=n(1))&&r.__esModule?r:{default:r}).default);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(6)),i=o(n(1));function o(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,l(e).call(this,"optional-composite","optional-composite",[t]))}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),n=e,(r=[{key:"parse",value:function(t){var e=t.mark();this.mark=e;var n=this.children[0].parse(t);return t.hasUnresolvedError()?(t.resolveError(),t.moveToMark(e),null):(t.addMatch(this,n),n)}},{key:"clone",value:function(){return new e(this.children[0])}},{key:"getPossibilities",value:function(t){if(null!=t&&t instanceof i.default||(t=this),this.parent===t){var e=this.children[0].getPossibilities(t);return e.unshift(""),e}return this.children[0].getPossibilities(t)}},{key:"getTokens",value:function(){return this._children[0].getTokens()}}])&&a(n.prototype,r),o&&a(n,o),e}(r.default);e.default=h},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){function t(e,n,r,i){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e,this.name=n,this.startIndex=r,this.endIndex=i,"number"!=typeof this.startIndex||"number"!=typeof this.endIndex)throw new Error("Invalid Arguments: startIndex and endIndex need to be number.")}var e,n,i;return e=t,(n=[{key:"filter",value:function(){throw new Error("Not Implemented Exception: expected subclass to override this method.")}},{key:"clone",value:function(){throw new Error("Not Implemented Exception: expected subclass to override this method.")}},{key:"toString",value:function(){throw new Error("Not Implemented Exception: expected subclass to override this method.")}}])&&r(e.prototype,n),i&&r(e,i),t}();e.default=i},function(t,e,n){"use strict";var r;function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=function(t){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=s(this,a(e).call(this,t,n,i,o))).children=[],r}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(e,t),n=e,(r=[{key:"clone",value:function(){var t=new e(this.type,this.name,this.startIndex,this.endIndex);return t.children=this.children.map((function(t){return t.clone()})),t}},{key:"filter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.slice();n.push(this),Object.freeze(n);var r=this.children.reduce((function(e,r){return e.concat(r.filter(t,n))}),[]),i=t(this,e);return i&&r.push(this),r}},{key:"toString",value:function(){return this.children.map((function(t){return t.toString()})).join("")}}])&&o(n.prototype,r),i&&o(n,i),e}(((r=n(8))&&r.__esModule?r:{default:r}).default);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,i=(r=n(13))&&r.__esModule?r:{default:r};function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.string=e,this.assertValidity(),this.index=0,this.length=e.length,this.history=new i.default,this.isInErrorState=!1}var e,n,r;return e=t,(n=[{key:"assertValidity",value:function(){if(this.isNullOrEmpty(this.string))throw new Error("Illegal Argument: Cursor needs to have a string that has a length greater than 0.")}},{key:"startRecording",value:function(){this.history.startRecording()}},{key:"stopRecording",value:function(){this.history.stopRecording()}},{key:"throwError",value:function(t){this.isInErrorState=!0,this.history.addError(t)}},{key:"addMatch",value:function(t,e){this.history.addMatch(t,e)}},{key:"resolveError",value:function(){this.isInErrorState=!1}},{key:"hasUnresolvedError",value:function(){return this.isInErrorState}},{key:"isNullOrEmpty",value:function(t){return null==t||"string"==typeof t&&0===t.length}},{key:"hasNext",value:function(){return this.index+1<this.string.length}},{key:"hasPrevious",value:function(){return this.index-1>=0}},{key:"next",value:function(){if(!this.hasNext())throw new Error("Cursor: Out of Bounds Exception.");this.index++}},{key:"previous",value:function(){if(!this.hasPrevious())throw new Error("Cursor: Out of Bounds Exception.");this.index--}},{key:"mark",value:function(){return this.index}},{key:"moveToMark",value:function(t){this.index=t}},{key:"moveToBeginning",value:function(){this.index=0}},{key:"moveToEnd",value:function(){this.index=this.string.length-1}},{key:"getChar",value:function(){return this.string.charAt(this.index)}},{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(t){if("number"==typeof t){if(t<0||t>this.lastIndex())throw new Error("Cursor: Out of Bounds Exception.");this.index=t}}},{key:"isAtBeginning",value:function(){return 0===this.index}},{key:"isAtEnd",value:function(){return this.index===this.string.length-1}},{key:"lastIndex",value:function(){return this.length-1}},{key:"didSuccessfullyParse",value:function(){return!this.hasUnresolvedError()&&this.isAtEnd()}},{key:"parseError",get:function(){return this.history.getFurthestError()}},{key:"lastMatch",get:function(){return this.history.getFurthestMatch()}}])&&o(e.prototype,n),r&&o(e,r),t}();e.default=s},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.array=[],this.positionToOptions=null}var e,n,i;return e=t,(n=[{key:"permute",value:function(t){return this.array=t,this.createPositionMap(),this.getPermutations()}},{key:"getPermutations",value:function(){var t=this;return this.array[0].reduce((function(e,n,r){return e.concat(t.getOptions(0,r))}),[])}},{key:"getKey",value:function(t,e){return"".concat(t,"|").concat(e)}},{key:"createPositionMap",value:function(){var t=this;this.positionToOptions={};for(var e=this.array.length-1;e>=0;e--)for(var n=function(n){var r=t.array[e][n],i=e+1;if(null!=t.array[i]){var o=t.array[i].map((function(e,n){return t.getOptions(i,n).map((function(t){return"".concat(r).concat(t)}))})).reduce((function(t,e){return t.concat(e)}),[]);t.setOptions(e,n,o)}else t.setOptions(e,n,[r])},r=0;r<this.array[e].length;r++)n(r)}},{key:"getOptions",value:function(t,e){return this.positionToOptions[this.getKey(t,e)]}},{key:"setOptions",value:function(t,e,n){this.positionToOptions[this.getKey(t,e)]=n}}])&&r(e.prototype,n),i&&r(e,i),t}();e.default=i},function(t,e,n){t.exports=n(27)},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isRecording=!1,this.furthestMatch={pattern:null,astNode:null},this.furthestError=null,this.patterns=[],this.astNodes=[],this.errors=[]}var e,n,i;return e=t,(n=[{key:"addMatch",value:function(t,e){this.isRecording&&(this.patterns.push(t),this.astNodes.push(e)),(null==this.furthestMatch.astNode||e.endIndex>=this.furthestMatch.astNode.endIndex)&&(this.furthestMatch.pattern=t,this.furthestMatch.astNode=e)}},{key:"addError",value:function(t){this.isRecording&&this.errors.push(t),(null==this.furthestError||t.index>=this.furthestError.index)&&(this.furthestError=t)}},{key:"startRecording",value:function(){this.isRecording=!0}},{key:"stopRecording",value:function(){this.isRecording=!1,this.clear()}},{key:"clear",value:function(){this.patterns.length=0,this.astNodes.length=0,this.errors.length=0}},{key:"getFurthestError",value:function(){return this.furthestError}},{key:"getFurthestMatch",value:function(){return this.furthestMatch}},{key:"getLastMatch",value:function(){return this.isRecording?{pattern:this.patterns[this.patterns.length-1]||null,astNode:this.astNodes[this.astNodes.length-1]||null}:this.furthestMatch}},{key:"getLastError",value:function(){return this.errors[this.errors.length-1]||null}},{key:"getAllParseStacks",value:function(){return this.astNodes.reduce((function(t,e){var n=t[t.length-1];return 0===e.startIndex&&(n=[],t.push(n)),n.push(e),t}),[]).map((function(t){for(var e=[],n=t.length-1;n>=0;n--){var r=t[n],i=t[n+1];null==i?e.unshift(r):Math.max(r.startIndex,i.startIndex)<=Math.min(r.endIndex,i.endIndex)||e.unshift(r)}return e}))}},{key:"getLastParseStack",value:function(){var t=this.getAllParseStacks();return t[t.length-1]||[]}}])&&r(e.prototype,n),i&&r(e,i),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(2)),i=(o(n(10)),o(n(4)));function o(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=u(this,l(e).call(this,"regex-value",t))).regexString=n,r.regex=new RegExp("^".concat(n),"g"),r._assertArguments(),r}var n,o,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),n=e,(o=[{key:"_assertArguments",value:function(){if("string"!=typeof this.regexString)throw new Error("Invalid Arguments: The regex argument needs to be a string of regex.");if(this.regexString.length<1)throw new Error("Invalid Arguments: The regex string argument needs to be at least one character long.");if("^"===this.regexString.charAt(0))throw new Error("Invalid Arguments: The regex string cannot start with a '^' because it is expected to be in the middle of a string.");if("$"===this.regexString.charAt(this.regexString.length-1))throw new Error("Invalid Arguments: The regex string cannot end with a '$' because it is expected to be in the middle of a string.")}},{key:"parse",value:function(t){return this._reset(t),this._tryPattern(),this.node}},{key:"_reset",value:function(t){this.cursor=t,this.regex.lastIndex=0,this.substring=this.cursor.string.substr(this.cursor.getIndex()),this.node=null}},{key:"_tryPattern",value:function(){var t=this.regex.exec(this.substring);if(null!=t&&0===t.index){var e=this.cursor.getIndex(),n=e+t[0].length-1;this.node=new i.default("regex-value",this.name,t[0],e,n),this.cursor.index=n,this.cursor.addMatch(this,this.node)}else this._processError()}},{key:"_processError",value:function(){var t="ParseError: Expected regex pattern of '".concat(this.regexString,"' but found '").concat(this.substring,"'."),e=new r.default(t,this.cursor.getIndex(),this);this.cursor.throwError(e)}},{key:"clone",value:function(t){return"string"!=typeof t&&(t=this.name),new e(t,this.regexString)}},{key:"getPossibilities",value:function(){return[this.getTokenValue()]}},{key:"getTokenValue",value:function(){return this.name}},{key:"getTokens",value:function(){return[this.name]}}])&&a(n.prototype,o),s&&a(n,s),e}(o(n(3)).default);e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=l(n(3)),i=l(n(4)),o=l(n(2)),s=l(n(5)),a=l(n(11)),u=l(n(1));function l(t){return t&&t.__esModule?t:{default:t}}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function p(t,e){return(p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=new a.default,v=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=f(this,d(e).call(this,"and-value",t,n)))._assertArguments(),r}var n,r,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(e,t),n=e,(r=[{key:"_assertArguments",value:function(){if(this._children.length<2)throw new Error("Invalid Argument: AndValue needs to have more than one value pattern.")}},{key:"_reset",value:function(t){this.index=0,this.nodes=[],this.node=null,this.cursor=t,this.mark=this.cursor.mark()}},{key:"parse",value:function(t){return this._reset(t),this._tryPatterns(),this.node}},{key:"_tryPatterns",value:function(){for(;;){var t=this._children[this.index].parse(this.cursor);if(this.cursor.hasUnresolvedError())break;if(this.nodes.push(t),!this._next()){this._processValue();break}}}},{key:"_next",value:function(){return!(!this._hasMorePatterns()||(this.cursor.hasNext()?(null!=this.nodes[this.nodes.length-1]&&this.cursor.next(),this.index++,0):null==this.nodes[this.nodes.length-1]?(this.index++,0):(this._assertRestOfPatternsAreOptional(),1)))}},{key:"_hasMorePatterns",value:function(){return this.index+1<this._children.length}},{key:"_assertRestOfPatternsAreOptional",value:function(){var t=this;if(!this.children.every((function(e,n){return n<=t.index||e instanceof s.default}))){var e=new o.default("Could not match ".concat(this.name," before string ran out."),this.index,this);this.cursor.throwError(e)}}},{key:"_processValue",value:function(){if(this.cursor.hasUnresolvedError())this.node=null;else{this.nodes=this.nodes.filter((function(t){return null!=t}));var t=this.nodes[this.nodes.length-1],e=this.mark,n=t.endIndex,r=this.nodes.map((function(t){return t.value})).join("");this.node=new i.default("and-value",this.name,r,e,n),this.cursor.index=this.node.endIndex,this.cursor.addMatch(this,this.node)}}},{key:"clone",value:function(t){return"string"!=typeof t&&(t=this.name),new e(t,this._children)}},{key:"getPossibilities",value:function(t){null!=t&&t instanceof u.default||(t=this);var e=this.children.map((function(e){return e.getPossibilities(t)}));return y.permute(e)}},{key:"getTokens",value:function(){for(var t=[],e=0;e<this._children.length;e++){var n=this._children[e];if(!(n instanceof s.default)){t=t.concat(n.getTokens());break}t=t.concat(n.getTokens())}return t}}])&&h(n.prototype,r),a&&h(n,a),e}(r.default);e.default=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n(3)),i=a(n(2)),o=a(n(4)),s=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=c(this,h(e).call(this,"any-of-these",t))).characters=n,r._assertArguments(),r}var n,r,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,t),n=e,(r=[{key:"_assertArguments",value:function(){if("string"!=typeof this.characters)throw new Error("Invalid Arguments: The characters argument needs to be a string of characters.");if(this.characters.length<1)throw new Error("Invalid Arguments: The characters argument needs to be at least one character long.")}},{key:"parse",value:function(t){return this._reset(t),this._tryPattern(),this.node}},{key:"_reset",value:function(t){this.cursor=t,this.mark=this.cursor.mark(),this.node=null}},{key:"_tryPattern",value:function(){if(this._isMatch()){var t=this.cursor.getChar(),e=this.cursor.getIndex();this.node=new o.default("any-of-these",this.name,t,e,e),this.cursor.addMatch(this,this.node)}else this._processError()}},{key:"_isMatch",value:function(){return this.characters.indexOf(this.cursor.getChar())>-1}},{key:"_processError",value:function(){var t="ParseError: Expected one of these characters, '".concat(this.characters,"' but found '").concat(this.cursor.getChar(),"' while parsing for '").concat(this.name,"'."),e=new i.default(t,this.cursor.getIndex(),this);this.cursor.throwError(e)}},{key:"clone",value:function(t){return"string"!=typeof t&&(t=this.name),new e(t,this.characters)}},{key:"getPossibilities",value:function(t){return null!=t&&t instanceof s.default||(t=this),this.getTokens()}},{key:"getTokens",value:function(){return this.characters.split("")}}])&&l(n.prototype,r),a&&l(n,a),e}(r.default);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(2)),i=o(n(4));function o(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=u(this,l(e).call(this,"literal",t))).literal=n,r._assertArguments(),r}var n,o,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),n=e,(o=[{key:"_assertArguments",value:function(){if("string"!=typeof this.literal)throw new Error("Invalid Arguments: The literal argument needs to be a string of characters.");if(this.literal.length<1)throw new Error("Invalid Arguments: The literalString argument needs to be at least one character long.")}},{key:"parse",value:function(t){return this._reset(t),this._tryPattern(),this.node}},{key:"_reset",value:function(t){this.cursor=t,this.mark=this.cursor.mark(),this.substring=this.cursor.string.substring(this.mark,this.mark+this.literal.length),this.node=null}},{key:"_tryPattern",value:function(){this.substring===this.literal?this._processMatch():this._processError()}},{key:"_processError",value:function(){var t="ParseError: Expected '".concat(this.literal,"' but found '").concat(this.substring,"'."),e=new r.default(t,this.cursor.getIndex(),this);this.cursor.throwError(e)}},{key:"_processMatch",value:function(){this.node=new i.default("literal",this.name,this.substring,this.mark,this.mark+this.literal.length-1),this.cursor.index=this.node.endIndex,this.cursor.addMatch(this,this.node)}},{key:"clone",value:function(t){return"string"!=typeof t&&(t=this.name),new e(t,this.literal)}},{key:"getPossibilities",value:function(){return[this.getTokenValue()]}},{key:"getTokenValue",value:function(){return this.literal}},{key:"getTokens",value:function(){return[this.getTokenValue()]}}])&&a(n.prototype,o),s&&a(n,s),e}(o(n(3)).default);e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;s(n(3));var r=s(n(4)),i=s(n(2)),o=s(n(1));function s(t){return t&&t.__esModule?t:{default:t}}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){return(h=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,c(e).call(this,"not-value",t,[n]))}var n,s,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h(t,e)}(e,t),n=e,(s=[{key:"_assertChildren",value:function(){if(!(this.children[0]instanceof o.default))throw new Error("Invalid Arguments: Expected the pattern to be a ValuePattern.");if("string"!=typeof this.name)throw new Error("Invalid Arguments: Expected name to be a string.")}},{key:"_reset",value:function(t){this.match="",this.node=null,this.cursor=t,this.mark=this.cursor.mark()}},{key:"parse",value:function(t){return this._reset(t),this._tryPattern(),this.node}},{key:"_tryPattern",value:function(){for(;;){var t=this.cursor.mark();if(this.children[0].parse(this.cursor),this.cursor.hasUnresolvedError()){this.cursor.resolveError(),this.cursor.moveToMark(t),this.match+=this.cursor.getChar();break}this.cursor.moveToMark(t);break}this._processMatch()}},{key:"_processMatch",value:function(){if(0===this.match.length){var t=new i.default("Didn't find any characters that didn't match the ".concat(this.children[0].name," pattern."),this.mark,this);this.cursor.throwError(t)}else this.node=new r.default("not-value",this.name,this.match,this.mark,this.mark),this.cursor.index=this.node.endIndex,this.cursor.addMatch(this,this.node)}},{key:"clone",value:function(t){return"string"!=typeof t&&(t=this.name),new e(t,this.children[0])}},{key:"getPossibilities",value:function(){return[]}},{key:"getTokens",value:function(){return[]}}])&&u(n.prototype,s),a&&u(n,a),e}(o.default);e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n(3)),i=a(n(4)),o=a(n(5)),s=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=c(this,h(e).call(this,"or-value",t,n)))._assertArguments(),r}var n,r,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,t),n=e,(r=[{key:"_assertArguments",value:function(){if(this._children.length<2)throw new Error("Invalid Argument: OrValue needs to have more than one value pattern.");if(this._children.some((function(t){return t instanceof o.default})))throw new Error("OrValues cannot have optional values.")}},{key:"_reset",value:function(t){this.index=0,this.errors=[],this.node=null,this.cursor=t,this.mark=t.mark()}},{key:"parse",value:function(t){return this._reset(t),this._tryPattern(),this.node}},{key:"_tryPattern",value:function(){for(;;){var t=this._children[this.index].parse(this.cursor,this.parseError);if(!this.cursor.hasUnresolvedError()){this.node=new i.default("or-value",this.name,t.value,t.startIndex,t.endIndex),this.cursor.index=this.node.endIndex,this.cursor.addMatch(this,this.node);break}if(!(this.index+1<this._children.length)){this.node=null;break}this.cursor.resolveError(),this.index++,this.cursor.moveToMark(this.mark)}}},{key:"clone",value:function(t){return"string"!=typeof t&&(t=this.name),new e(t,this._children)}},{key:"getPossibilities",value:function(t){return null!=t&&t instanceof s.default||(t=this),this.children.map((function(e){return e.getPossibilities(t)})).reduce((function(t,e){return t.concat(e)}),[])}},{key:"getTokens",value:function(){var t=this._children.map((function(t){return t.getTokens()}));return t.every((function(t){return t.every((function(t){return"string"==typeof t}))}))&&t.length>0?t.reduce((function(t,e){return t.concat(e)}),[]):this._children[0].getTokens()}}])&&l(n.prototype,r),a&&l(n,a),e}(r.default);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=u(n(3)),i=u(n(4)),o=u(n(2)),s=u(n(5)),a=u(n(1));function u(t){return t&&t.__esModule?t:{default:t}}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(t){function e(t,n,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=h(this,f(e).call(this,"repeat-value",t,null!=r?[n,r]:[n])))._pattern=i.children[0],i._divider=i.children[1],i._assertArguments(),i}var n,r,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(e,t),n=e,(r=[{key:"_assertArguments",value:function(){if(this._pattern instanceof s.default)throw new Error("Invalid Arguments: The pattern cannot be a optional pattern.")}},{key:"_reset",value:function(t){this.nodes=[],this.cursor=t,this.mark=this.cursor.mark()}},{key:"parse",value:function(t){return this._reset(t),this._tryPattern(),this.node}},{key:"_tryPattern",value:function(){for(;;){var t=this._pattern.parse(this.cursor);if(this.cursor.hasUnresolvedError()){this._processMatch();break}if(this.nodes.push(t),t.endIndex===this.cursor.lastIndex()){this._processMatch();break}if(this.cursor.next(),null!=this._divider){var e=this.cursor.mark(),n=this._divider.parse(this.cursor);if(this.cursor.hasUnresolvedError()){this.cursor.moveToMark(e),this._processMatch();break}this.nodes.push(n),this.cursor.next()}}}},{key:"_processMatch",value:function(){if(this.cursor.resolveError(),0===this.nodes.length){var t=new o.default("Did not find a repeating match of ".concat(this.name,"."),this.mark,this);this.cursor.throwError(t),this.node=null}else{var e=this.nodes.map((function(t){return t.value})).join("");this.node=new i.default("repeat-value",this.name,e,this.nodes[0].startIndex,this.nodes[this.nodes.length-1].endIndex),this.cursor.index=this.node.endIndex,this.cursor.addMatch(this,this.node)}}},{key:"clone",value:function(t){return"string"!=typeof t&&(t=this.name),new e(t,this._pattern,this._divider)}},{key:"getPossibilities",value:function(t){if(null!=t&&t instanceof a.default||(t=this),null!=this._divider){var e=this._divider.getPossibilities(t);return this._pattern.getPossibilities(t).map((function(t){return e.map((function(e){return"".concat(t).concat(e)}))})).reduce((function(t,e){return t.concat(e)}),[])}return this._pattern.getPossibilities(t)}},{key:"getTokens",value:function(){return this._pattern.getTokens()}}])&&c(n.prototype,r),u&&c(n,u),e}(r.default);e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=c(n(6)),i=c(n(9)),o=c(n(2)),s=c(n(5)),a=c(n(7)),u=c(n(11)),l=c(n(1));function c(t){return t&&t.__esModule?t:{default:t}}function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e){return!e||"object"!==h(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var v=new u.default,m=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=d(this,p(e).call(this,"and-composite",t,r)))._assertArguments(),n}var n,r,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(e,t),n=e,(r=[{key:"_assertArguments",value:function(){if(this._children.length<2)throw new Error("Invalid Argument: AndValue needs to have more than one value pattern.")}},{key:"_reset",value:function(t){this.index=0,this.nodes=[],this.node=null,this.cursor=t,this.mark=this.cursor.mark()}},{key:"parse",value:function(t){return this._reset(t),this._tryPatterns(),this.node}},{key:"_tryPatterns",value:function(){for(;;){var t=this._children[this.index].parse(this.cursor);if(this.cursor.hasUnresolvedError()){this.cursor.moveToMark(this.mark);break}if(this.nodes.push(t),!this._next()){this._processValue();break}}}},{key:"_next",value:function(){return!(!this._hasMorePatterns()||(this.cursor.hasNext()?(null!=this.nodes[this.nodes.length-1]&&this.cursor.next(),this.index++,0):null==this.nodes[this.nodes.length-1]?(this.index++,0):(this._assertRestOfPatternsAreOptional(),1)))}},{key:"_hasMorePatterns",value:function(){return this.index+1<this._children.length}},{key:"_assertRestOfPatternsAreOptional",value:function(){var t=this;if(!this.children.every((function(e,n){return n<=t.index||e instanceof s.default||e instanceof a.default}))){var e=new o.default("Could not match ".concat(this.name," before string ran out."),this.index,this);this.cursor.throwError(e)}}},{key:"_processValue",value:function(){if(this.cursor.hasUnresolvedError())this.node=null;else{this.nodes=this.nodes.filter((function(t){return null!=t}));var t=this.nodes[this.nodes.length-1],e=this.mark,n=t.endIndex;this.node=new i.default("and-composite",this.name,e,n),this.node.children=this.nodes,this.cursor.index=this.node.endIndex,this.cursor.addMatch(this,this.node)}}},{key:"clone",value:function(t){return"string"!=typeof t&&(t=this.name),new e(t,this._children)}},{key:"getPossibilities",value:function(t){null!=t&&t instanceof l.default||(t=this);var e=this.children.map((function(e){return e.getPossibilities(t)}));return v.permute(e)}},{key:"getTokens",value:function(){for(var t=[],e=0;e<this._children.length;e++){var n=this._children[e];if(!(n instanceof s.default||n instanceof a.default)){t=t.concat(n.getTokens());break}t=t.concat(n.getTokens())}return t}}])&&f(n.prototype,r),u&&f(n,u),e}(r.default);e.default=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n(6)),i=a(n(5)),o=a(n(7)),s=a(n(1));function a(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=c(this,h(e).call(this,"or-composite",t,n)))._assertArguments(),r}var n,r,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,t),n=e,(r=[{key:"_assertArguments",value:function(){if(this._children.length<2)throw new Error("Invalid Argument: OrValue needs to have more than one value pattern.");if(this._children.some((function(t){return t instanceof i.default||t instanceof o.default})))throw new Error("OrComposite cannot have optional values.")}},{key:"_reset",value:function(t){this.cursor=t,this.mark=null,this.index=0,this.node=null,this.mark=t.mark()}},{key:"parse",value:function(t){return this._reset(t),this._tryPattern(),null!=this.node&&this.cursor.addMatch(this,this.node),this.node}},{key:"_tryPattern",value:function(){for(;;){var t=this._children[this.index];if(this.node=t.parse(this.cursor),!this.cursor.hasUnresolvedError()){this.cursor.index=this.node.endIndex;break}if(!(this.index+1<this._children.length)){this.node=null;break}this.cursor.resolveError(),this.index++,this.cursor.moveToMark(this.mark)}}},{key:"clone",value:function(t){return"string"!=typeof t&&(t=this.name),new e(t,this._children)}},{key:"getPossibilities",value:function(t){return null!=t&&t instanceof s.default||(t=this),this.children.map((function(e){return e.getPossibilities(t)})).reduce((function(t,e){return t.concat(e)}),[])}},{key:"getTokens",value:function(){var t=this._children.map((function(t){return t.getTokens()}));return t.every((function(t){return t.every((function(t){return"string"==typeof t}))}))&&t.length>0?t.reduce((function(t,e){return t.concat(e)}),[]):this._children[0].getTokens()}}])&&l(n.prototype,r),a&&l(n,a),e}(r.default);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=u(n(6)),i=u(n(9)),o=u(n(2)),s=u(n(7)),a=u(n(1));function u(t){return t&&t.__esModule?t:{default:t}}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=function(t){function e(t,n,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=h(this,f(e).call(this,"repeat-composite",t,null!=r?[n,r]:[n])))._pattern=i.children[0],i._divider=i.children[1],i._assertArguments(),i}var n,r,u;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(e,t),n=e,(r=[{key:"_assertArguments",value:function(){if(this._pattern instanceof s.default)throw new Error("Invalid Arguments: The pattern cannot be a optional pattern.")}},{key:"_reset",value:function(t){this.nodes=[],this.cursor=t,this.mark=this.cursor.mark()}},{key:"parse",value:function(t){return this._reset(t),this._tryPattern(),this.node}},{key:"_tryPattern",value:function(){for(;;){var t=this._pattern.parse(this.cursor);if(this.cursor.hasUnresolvedError()){this._processMatch();break}if(this.nodes.push(t),t.endIndex===this.cursor.lastIndex()){this._processMatch();break}if(this.cursor.next(),null!=this._divider){var e=this.cursor.mark(),n=this._divider.parse(this.cursor);if(this.cursor.hasUnresolvedError()){this.cursor.moveToMark(e),this._processMatch();break}this.nodes.push(n),this.cursor.next()}}}},{key:"_processMatch",value:function(){this.cursor.resolveError(),0===this.nodes.length?(this.cursor.throwError(new o.default("Did not find a repeating match of ".concat(this.name,"."),this.mark,this)),this.node=null):(this.node=new i.default("repeat-composite",this.name,this.nodes[0].startIndex,this.nodes[this.nodes.length-1].endIndex),this.node.children=this.nodes,this.cursor.index=this.node.endIndex,this.cursor.addMatch(this,this.node))}},{key:"clone",value:function(t){return"string"!=typeof t&&(t=this.name),new e(t,this._pattern,this._divider)}},{key:"getPossibilities",value:function(t){if(null!=t&&t instanceof a.default||(t=this),null!=this._divider){var e=this._divider.getPossibilities(t);return this._pattern.getPossibilities(t).map((function(t){return e.map((function(e){return"".concat(t).concat(e)}))})).reduce((function(t,e){return t.concat(e)}),[])}return this._pattern.getPossibilities(t)}},{key:"getTokens",value:function(){return this._pattern.getTokens()}}])&&c(n.prototype,r),u&&c(n,u),e}(r.default);e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(1)),i=o(n(2));function o(t){return t&&t.__esModule?t:{default:t}}function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=u(this,l(e).call(this,"recursive",t))).isRecursing=!1,n}var n,r,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,t),n=e,(r=[{key:"getPattern",value:function(){var t=this;return this._climb(this.parent,(function(e){return null!=e&&e.name===t.name}))}},{key:"_climb",value:function(t,e){return e(t)?t:t&&null!=t.parent?this._climb(t.parent,e):null}},{key:"parse",value:function(t){if(null==this.pattern){var e=this.getPattern();if(null==e)return t.throwError(new i.default("Couldn't find parent pattern to recursively parse, with the name ".concat(this.name,".")),t.index,this),null;this.pattern=e.clone(),this.pattern.parent=this}var n=this.pattern.parse(t);return t.hasUnresolvedError()||t.addMatch(this,n),n}},{key:"clone",value:function(t){return"string"!=typeof t&&(t=this.name),new e(t)}},{key:"getPossibilities",value:function(){if(this.isRecursing)return["[".concat(this.name,"]")];this.isRecursing=!0;var t=this.getPattern().getPossibilities();return this.isRecursing=!1,t}},{key:"getTokenValue",value:function(){return this.getPattern().getTokenValue()}},{key:"getTokens",value:function(){if(!this.isRecursing){this.isRecursing=!0;var t=this.getPattern().getTokens();return this.isRecursing=!1,t}}}])&&a(n.prototype,r),o&&a(n,o),e}(r.default);e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(0);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cursor=null,this.result=null,this.text=null,this.match=null,this.error=null,this.patternMatch=null,this.matchedText="",this.rootPattern=null,this.possibilities=null}var e,n,a;return e=t,a=[{key:"inspectParse",value:function(e,n){return(new t).inspectParse(e,n)}}],(n=[{key:"inspectParse",value:function(t,e){return this.reset(),this.text=t,this.rootPattern=e,0===t.length?{pattern:null,astNode:null,match:null,error:null,possibilities:{startIndex:0,options:e.getPossibilities()},isComplete:!1}:(this.parse(),this.saveMatchedText(),this.saveMatch(),this.saveError(),this.savePossibilities(),{pattern:this.patternMatch.pattern,astNode:this.patternMatch.astNode,match:this.match,error:this.error,possibilities:this.possibilities,isComplete:this.cursor.didSuccessfullyParse()})}},{key:"reset",value:function(){this.cursor=null,this.result=null,this.text=null,this.match=null,this.error=null,this.patternMatch=null,this.matchedText="",this.rootPattern=null,this.possibilities=null}},{key:"parse",value:function(){this.rootPattern=this.rootPattern,this.cursor=new r.Cursor(this.text),this.result=this.rootPattern.parse(this.cursor),this.patternMatch=this.cursor.lastMatch}},{key:"saveMatchedText",value:function(){null!=this.patternMatch.astNode&&(this.matchedText=this.text.substring(0,this.patternMatch.astNode.endIndex+1))}},{key:"saveMatch",value:function(){if(null!=this.patternMatch.astNode){var t=this.matchedText.length-1;this.match={text:this.matchedText,startIndex:0,endIndex:t}}else this.match=null}},{key:"saveError",value:function(){if(null==this.patternMatch.astNode)return this.error={startIndex:0,endIndex:this.text.length-1,text:this.text},this;if(this.text.length>this.matchedText.length){var t=this.text.length-this.matchedText.length,e=this.patternMatch.astNode.endIndex+1,n=e+t-1;this.error={startIndex:e,endIndex:n,text:this.text.substring(e,n+1)}}else this.error=null}},{key:"savePossibilities",value:function(){if(this.patternMatch.pattern===this.rootPattern&&this.cursor.didSuccessfullyParse())this.possibilities=null;else{if(null==this.patternMatch.astNode){var t=this.rootPattern.getPossibilities(),e=this.text.split(" ").filter((function(t){return t.length>0}));return 0===(t=t.filter((function(t){return e.some((function(e){return t.indexOf(e)>-1}))}))).length?void(this.possibilities=null):void(this.possibilities={startIndex:0,options:t})}var n=this.patternMatch.pattern,r=n.parent,s=r.children.indexOf(n),a=r.clone();a.children=a.children.slice(s+1);var u=a.getPossibilities(),l=this.matchedText.length;if(this.matchedText.length<this.text.length){var c=this.text.substring(this.matchedText.length),h=u.filter((function(t){return 0===t.indexOf(c)})).map((function(t){return t.substring(c.length)}));return 0===h.length?void(this.possibilities=null):(this.match=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(n,!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.match,{text:this.match.text+c,endIndex:this.match.endIndex+c.length}),this.error=null,void(this.possibilities={startIndex:this.match.endIndex+1,options:h}))}this.possibilities={startIndex:l,options:u}}}}])&&s(e.prototype,n),a&&s(e,a),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(0);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cursor=null,this.result=null,this.text=null,this.match=null,this.error=null,this.patternMatch=null,this.matchedText="",this.rootPattern=null,this.tokens=null,this.options=[],this.parseStack=[]}var e,n,a;return e=t,a=[{key:"inspect",value:function(e,n){return(new t).inspect(e,n)}}],(n=[{key:"inspect",value:function(t,e){return this.reset(),this.text=t,this.rootPattern=e,0===t.length?{pattern:null,astNode:null,match:null,error:null,tokens:{startIndex:0,options:e.getTokens()},isComplete:!1,parseStack:[]}:(this.parse(),this.saveParseStack(),this.saveMatchedText(),this.saveMatch(),this.saveError(),this.saveOptions(),this.saveNextToken(),{pattern:this.patternMatch.pattern,astNode:this.patternMatch.astNode,match:this.match,error:this.error,tokens:this.tokens,isComplete:this.cursor.didSuccessfullyParse(),parseStack:this.parseStack})}},{key:"reset",value:function(){this.cursor=null,this.result=null,this.text=null,this.match=null,this.error=null,this.patternMatch=null,this.matchedText="",this.rootPattern=null,this.tokens=null,this.options=[],this.parseStack=[]}},{key:"parse",value:function(){this.rootPattern=this.rootPattern,this.cursor=new r.Cursor(this.text),this.cursor.startRecording(),this.result=this.rootPattern.parse(this.cursor),this.patternMatch=this.cursor.lastMatch}},{key:"saveParseStack",value:function(){this.parseStack=this.cursor.history.getLastParseStack()}},{key:"saveMatchedText",value:function(){null!=this.patternMatch.astNode&&(this.matchedText=this.text.substring(0,this.patternMatch.astNode.endIndex+1))}},{key:"saveMatch",value:function(){if(null!=this.patternMatch.astNode){var t=this.matchedText.length-1;this.match={text:this.matchedText,startIndex:0,endIndex:t}}else this.match=null}},{key:"saveError",value:function(){if(null==this.patternMatch.astNode)return this.error={startIndex:0,endIndex:this.text.length-1,text:this.text},this;if(this.text.length>this.matchedText.length){var t=this.text.length-this.matchedText.length,e=this.patternMatch.astNode.endIndex+1,n=e+t-1;this.error={startIndex:e,endIndex:n,text:this.text.substring(e,n+1)}}else this.error=null}},{key:"saveNextToken",value:function(){if(this.patternMatch.pattern===this.rootPattern&&this.cursor.didSuccessfullyParse())this.tokens=null;else{if(null==this.patternMatch.astNode){var t=this.rootPattern.getTokens(),e=this.text.split(" ").filter((function(t){return t.length>0}));return 0===(t=t.filter((function(t){return e.some((function(e){return t.indexOf(e)>-1}))}))).length?void(this.tokens=null):void(this.tokens={startIndex:0,options:t})}var n=this.options,r=this.matchedText.length;if(this.matchedText.length<this.text.length){var s=this.text.substring(this.matchedText.length),a=n.filter((function(t){return 0===t.indexOf(s)})).map((function(t){return t.substring(s.length)}));return 0===a.length?void(this.tokens=null):(this.match=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(n,!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.match,{text:this.match.text+s,endIndex:this.match.endIndex+s.length}),this.error=null,void(this.tokens={startIndex:this.match.endIndex+1,options:a}))}this.tokens={startIndex:r,options:n}}}},{key:"saveOptions",value:function(){var t=this,e=this.cursor.history.astNodes.reduce((function(t,e,n){return e.endIndex===t.furthestTextIndex?t.nodeIndexes.push(n):e.endIndex>t.furthestTextIndex&&(t.furthestTextIndex=e.endIndex,t.nodeIndexes=[n]),t}),{furthestTextIndex:-1,nodeIndexes:[]}).nodeIndexes.reduce((function(e,n){return t.cursor.history.patterns[n].getNextTokens().forEach((function(t){e[t]=!0})),e}),{});this.options=Object.keys(e)}}])&&s(e.prototype,n),a&&s(e,a),t}();e.default=a},function(t,e,n){"use strict";n.r(e);class r{constructor(t){this.setPoints(t)}setPoints(t){this.points=t,this.reducedPoints=new Array(t.length),Object.freeze(this.points)}valueAt(t){const e=this.points,n=this.reducedPoints,r=e.length;for(let t=0;t<r;t++)n[t]=e[t];for(let e=0;e<r;e++){const i=r-e-1;for(let e=0;e<i;e++){const r=n[e+1],i=n[e];n[e]=(r-i)*t+i}}return n[0]}clone(){return new r(this.points.slice())}}const i=()=>{};class o{constructor(t){this.setCallback(t),this.visitDown=this.visitDown.bind(this),this.visitUp=this.visitUp.bind(this)}walkUp(t){Array.isArray(t.children)&&t.children.forEach(this.visitUp),this.callback(t)}visitUp(t){this.walkUp(t)}walkDown(t){this.callback(t),Array.isArray(t.children)&&t.children.forEach(this.visitDown)}visitDown(t){this.walkDown(t)}setCallback(t){this.callback="function"==typeof t?t:i,this.callback=t}}const s=new o;function a(t){"number"===t.name&&(t.value=Number(t.value))}class u{areTreeStructuresEqual(t,e){return this.sequence(t)===this.sequence(e)}sequence(t){const e=[];return s.setCallback(t=>{e.push(t.name)}),s.visitDown(t),e.join("|")}sequenceHash(t){return function(t,e=0){let n=3735928559^e,r=1103547991^e;for(let e,i=0;i<t.length;i++)e=t.charCodeAt(i),n=Math.imul(n^e,2654435761),r=Math.imul(r^e,1597334677);return n=Math.imul(n^n>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),4294967296*(2097151&r)+(n>>>0)}(this.sequence(t))}convertNumberNodesToNumberValues(t){s.setCallback(a),s.visitDown(t)}}const l=()=>{},c=new u;const h=new class{constructor(t){this.setCallback(t),this.visitDown=this.visitDown.bind(this),this.visitUp=this.visitUp.bind(this)}visitUp(t){if(!Array.isArray(t))return;const e=t.slice(1),n=t[0];if(!e.every(t=>c.areTreeStructuresEqual(n,t)))throw new Error("The nodes structures need to be the same.");this.walkUp(t)}walkUp(t){if(!Array.isArray(t))return;const e=t[0];if(Array.isArray(e.children))for(let n=0;n<e.children.length;n++){const e=t.map(t=>t.children[n]);this.walkUp(e)}this.callback(t)}visitDown(t){if(!Array.isArray(t))return;const e=t.slice(1),n=t[0];if(!e.every(t=>c.areTreeStructuresEqual(n,t)))throw new Error("The nodes structures need to be the same.");this.walkDown(t)}walkDown(t){if(!Array.isArray(t))return;this.callback(t);const e=t[0];if(Array.isArray(e.children))for(let n=0;n<e.children.length;n++){const e=t.map(t=>t.children[n]);this.walkDown(e)}}setCallback(t){this.callback="function"==typeof t?t:l,this.callback=t}};class f{constructor(t){this.animation=t,this.visit=this.visit.bind(this),this.progress=0,this.bezierCurve=new r([]),this.animationGraphs=[],this.createAnimationGraphs()}createAnimationGraphs(){this.animationGraphs.length=0,this.animationGraphs.push(this.animation.from.graph);for(let t=0;t<this.animation.controls.length;t++)this.animationGraphs.push(this.animation.controls[t]);this.animationGraphs.push(this.animation.to.graph),this.animationGraphs.push(this.animation.result.graph)}visit(t){const e=t.slice(),n=e.pop(),r=this.progress;if("number"===e[0].name){const t=r-this.animation.startAt,i=this.animation.endAt-this.animation.startAt,o=this.animation.easing(t)*i,s=e.map(t=>t.value);this.bezierCurve.setPoints(s),n.value=this.bezierCurve.valueAt(o)}else Array.isArray(n.children)||(r>=this.animation.startAt?n.value=e[e.length-1].value:n.value=e[0].value)}render(t){this.progress=t,h.setCallback(this.visit),h.visitDown(this.animationGraphs);const e=this.animation.result.graph.toString();return this.animation.result.value=e,this.animation.result}}var d=n(0);var p=new d.RegexValue("divider","\\s*[,]\\s*");var y=new d.RegexValue("number","[-+]?[0-9]*[.]?[0-9]+([eE][-+]?[0-9]+)?");const v=new d.RegexValue("unit-type","[a-zA-Z%]+");var m=new d.AndComposite("unit",[y,v]);var g=new d.RegexValue("hex","#[0-9a-fA-F]{6}|#[0-9a-fA-F]{3}");var b=new d.RegexValue("name","[a-zA-Z]+[a-zA-Z0-9_-]*");const _=new d.Literal("optional-space"," "),w=new d.RepeatValue("optional-spaces",_);var k=new d.OptionalValue(w);const O=new d.Literal("open-paren","("),x=new d.Literal("close-paren",")"),P=new d.RecursivePattern("values"),E=new d.RepeatComposite("arguments",P,p),S=new d.OptionalComposite(E);var j=new d.AndComposite("method",[b,O,k,S,k,x]);var T=new d.OrComposite("value",[g,j,m,y,b]);const M=new d.Literal("space"," ");var A=new d.RepeatValue("spaces",M);var I=new d.RepeatComposite("values",T,A);var C=new d.RepeatComposite("css-value",I,p);const V=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})|([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})$/i;class N{constructor(t){this.setHex(t)}setHex(t){this.hexString=t,this.normalizeHex(),this.saveRgba()}saveRgba(){const t=this.hexString;V.lastIndex=0;const e=V.exec(t);this.rgba=e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),1]:[0,0,0,1]}toComplexNode(){const t=this.rgba.map(t=>{const e=new d.CompositeNode("repeat-composite","values");return e.children.push(new d.ValueNode("regex-value","number",t.toString())),e}).reduce((t,e)=>(t.push(e),t.push(new d.ValueNode("regex-value","divider",", ")),t),[]),e=new d.CompositeNode("and-composite","method"),n=new d.ValueNode("regex-value","name","rgba"),r=new d.ValueNode("literal","open-paren","("),i=new d.CompositeNode("repeat-composite","arguments"),o=new d.ValueNode("literal","close-paren",")");return i.children=t,e.children.push(n,r,i,o),e}toValueNode(){return new d.ValueNode("hex",this.hexString)}toRgbString(){return`rgb(${this.rgba[0]},${this.rgba[1]},${this.rgba[2]})`}normalizeHex(){4===this.hexString.length&&(this.hexString=this.hexString+this.hexString.substring(1))}numberToHex(t){t>255&&(t=255),t<0&&(t=0);let e=t.toString(16);return e.length<2&&(e="0"+e),e}toHexString(){const t=this.rgba;return`#${this.numberToHex(t[0])}${this.numberToHex(t[1])}${this.numberToHex(t[2])}`}}const R=t=>"optional-spaces"!==t.name;const D=new u,z=new class{constructor(){this.visitNode=this.visitNode.bind(this),this.visitor=new o(this.visitNode)}visitNode(t){Array.isArray(t.children)&&(this.removeOptionalSpaces(t),this.replaceHex(t),this.removeUnnecessaryDividers(t),this.removeUnnecessaryValuesSpaces(t)),this.collapseWhiteSpace(t),this.removeSpacesAroundDividers(t)}collapseWhiteSpace(t){"spaces"===t.name&&(t.value=" ")}removeSpacesAroundDividers(t){"divider"===t.name&&(t.value=t.value.trim()+" ")}removeUnnecessaryDividers(t){const e=t.children;for(;e.length>0&&"divider"===e[e.length-1].name;)e.pop()}removeUnnecessaryValuesSpaces(t){const e=t.children;for(;"values"===t.name&&e.length>0&&"spaces"===e[e.length-1].name;)e.pop()}removeOptionalSpaces(t){t.children=t.children.filter(R)}replaceHex(t){t.children=t.children.map(t=>{if("hex"===t.name){return new N(t.value).toComplexNode()}return t})}normalize(t){return this.visitor.visitDown(t),t}};class U{constructor(t,e,n){this.value=t,void 0===e?(this.graph=z.normalize(C.parse(new d.Cursor(t))),D.convertNumberNodesToNumberValues(this.graph)):this.graph=e,this.graphHash=void 0===n?D.sequenceHash(this.graph):n}clone(){return new U(this.value,this.graph.clone(),this.graphHash)}}class F{constructor(){this.config=null}setConfig(t){this.config=t}isSimpleConfig(){return this.hasValidToAsString()}validateConfig(){if(null==this.config)throw new Error('Invalid Arguments: The "config" cannot be null or undefined.')}validate(t){this.setConfig(t),this.validateName(),this.validateProperty(),this.validateToAsParsedValue(),this.validateControlsAsParsedValues(),this.validateFromAsParsedValue(),this.validateStartAt(),this.validateEndAt(),this.validateEasingFunction(),this.validateNodes()}validateName(){if(this.validateConfig(),!this.hasValidName())throw new Error('Invalid Arguments: The "name" property needs to be an string.')}hasValidName(){return"string"==typeof this.config.name}validateProperty(){if(this.validateConfig(),!this.hasValidProperty())throw new Error('The "property" property needs to be a string.')}hasValidProperty(){return"string"==typeof this.config.property}validateToAsString(){if(this.validateConfig(),!this.hasValidToAsString())throw new Error(`The "to" property needs to be a string, but found ${this.config.to}.`)}hasValidToAsString(){return"string"==typeof this.config.to}validateToAsParsedValue(){if(this.validateConfig(),!this.hasValidToAsParsedValue())throw new Error(`The "to" property needs to be a ParsedValue, but found ${this.config.to}.`)}hasValidToAsParsedValue(){return this.config.to instanceof U}validateFromAsString(){if(this.validateConfig(),"string"!=typeof this.config.from)throw new Error(`The "from" property needs to be a string, but found ${this.config.from}.`)}hasValidFromAsString(){return"string"==typeof this.config.from}validateFromAsParsedValue(){if(this.validateConfig(),!this.hasValidFromAsParsedValue())throw new Error(`The "from" property needs to be a ParsedValue, but found ${this.config.from}.`)}hasValidFromAsParsedValue(){return this.config.from instanceof U}validateControlsAsStrings(){if(this.validateConfig(),!this.hasValidControlsAsStrings())throw new Error(`The "controls" property needs to be made of strings, but found ${this.config.controls}.`)}hasValidControlsAsStrings(){return Array.isArray(this.config.controls)&&this.config.controls.every(t=>"string"==typeof t)}validateControlsAsParsedValues(){if(this.validateConfig(),!this.hasValidControlsAsParsedValues())throw new Error(`The "controls" property needs to be made of ParsedValues, but found ${this.config.controls}.`)}hasValidControlsAsParsedValues(){return this.config.controls.every(t=>t instanceof U)}validateStartAt(){if(this.validateConfig(),!this.hasValidStartAt)throw new Error('The "startAt" property must be a number between 0 and 1.')}hasValidStartAt(){return"number"==typeof this.config.startAt&&this.config.startAt>=0&&this.config.startAt<=1}validateEndAt(){if(this.validateConfig(),!this.hasValidEndAt())throw new Error('The "endAt" property must be a number between 0 and 1.')}hasValidEndAt(){return"number"==typeof this.config.endAt&&this.config.endAt>=0&&this.config.endAt<=1}validateEasingString(){if(this.validateConfig(),!this.hasValidEasingString())throw new Error('The "easing" property must be a string.')}hasValidEasingString(){return"string"==typeof this.config.easing}validateEasingFunction(){if(this.validateConfig(),!this.hasValidEasingFunction())throw new Error('The "easing" property must be a function.')}hasValidEasingFunction(){return"function"==typeof this.config.easing}validateNodes(){this.validateConfig();const t=this.config;if(!this.areGraphStructuresEqual())throw new Error(`Invalid Animation: The value types that are being animated do not match. From: ${JSON.stringify(t.from.value)}, To:${JSON.stringify(t.to.value)}, Controls: ${JSON.stringify(t.controls.map(t=>t.value))}`)}areGraphStructuresEqual(){let t=!0;const e=this.config;e.to.graphHash!==e.from.graphHash&&(t=!1);for(let n=0;n<e.controls.length;n++){if(e.controls[n].graphHash!==e.from.graphHash){t=!1;break}}return t}}var H=t=>{let e=t;return(e/=1)<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},$=t=>1-H(1-t);var q={easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>1*(t/=1)*t*t,easeOutCubic:t=>1*((t=t/1-1)*t*t+1),easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>1*(t/=1)*t*t*t,easeOutQuart:t=>-1*((t=t/1-1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>1*(t/=1)*t*t*t*t,easeOutQuint:t=>1*((t=t/1-1)*t*t*t*t+1),easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*(Math.PI/2)),easeOutSine:t=>1*Math.sin(t/1*(Math.PI/2)),easeInOutSine:t=>-.5*(Math.cos(Math.PI*t/1)-1),easeInExpo:t=>0==t?0:1*Math.pow(2,10*(t/1-1)),easeOutExpo:t=>1==t?1:1*(1-Math.pow(2,-10*t/1)),easeInOutExpo:t=>0==t?0:1==t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t)),easeInCirc:t=>-1*(Math.sqrt(1-(t/=1)*t)-1),easeOutCirc:t=>1*Math.sqrt(1-(t=t/1-1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>{return t<=0?0:t>=1?1:-1*Math.pow(2,10*(t-=1))*Math.sin((t-.075)*(2*Math.PI)/.3)},easeOutElastic:t=>{return t<=0?0:t>=1?1:1*Math.pow(2,-10*t)*Math.sin((t-.075)*(2*Math.PI)/.3)+1},easeInOutElastic:t=>{var e=1.70158,n=0,r=1;if(0==t)return 0;if(2==(t/=.5))return 1;if(n||(n=.3),r<Math.abs(1)){r=1;e=n/4}else e=n/(2*Math.PI)*Math.asin(1/r);return t<1?r*Math.pow(2,10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/n)*-.5+0:r*Math.pow(2,-10*(t-=1))*Math.sin((1*t-e)*(2*Math.PI)/n)*.5+1+0},easeInBack:t=>{const e=1.70158;return 1*(t/=1)*t*((e+1)*t-e)},easeOutBack:t=>{const e=1.70158;return 1*((t=t/1-1)*t*((e+1)*t+e)+1)},easeInOutBack:t=>{const e=2.5949095;return(t/=.5)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},easeInBounce:$,easeOutBounce:H,easeInOutBounce:t=>t<.5?.5*$(2*t):.5*H(2*t-1)+.5,linear:t=>t};const B=new F;const L=new F,G=new class{constructor(){this.config=null}_setConfig(t){this.config=t,this.result={},B.setConfig(t)}normalizeConfig(t){return this._setConfig(t),this._normalizeName(),this._normalizeProperty(),this._normalizeFrom(),this._normalizeControls(),this._normalizeTo(),this._normalizeStartAt(),this._normalizeEndAt(),this._normalizeEasing(),this.result}_normalizeName(){this.result.name=this.config.name}_normalizeProperty(){this.result.property=this.config.property}_normalizeFrom(){B.hasValidFromAsString()?this.result.from=new U(this.config.from):B.validateFromAsString()}_normalizeControls(){Array.isArray(this.config.controls)||(this.config.controls=[]),B.hasValidControlsAsStrings()?this.result.controls=this.config.controls.map(t=>U(t)):B.validateControlsAsStrings()}_normalizeTo(){B.hasValidToAsString()?this.result.to=new U(this.config.to):B.validateToAsString()}_normalizeStartAt(){B.hasValidStartAt()?this.result.startAt=this.config.startAt:this.result.startAt=0}_normalizeEndAt(){B.hasValidEndAt()?this.result.endAt=this.config.endAt:this.result.endAt=1}_normalizeEasing(){B.hasValidEasingString()||B.hasValidEasingFunction()?B.hasValidEasingString()?this.result.easing=q[this.config.easing]||q.linear:B.hasValidEasingFunction()&&(this.result.easing=this.config.easing):this.result.easing=q.linear}};class Q{constructor(t){L.setConfig(t),L.validate(t),this.name=t.name,this.property=t.property,this.to=t.to,this.from=t.from,this.result=t.from.clone(),this.startAt=t.startAt,this.endAt=t.endAt,this.controls=t.controls,this.easing=t.easing}static fromSimpleConfig(t){return new Q(G.normalizeConfig(t))}}const J=(t,e)=>t.animation.startAt-e.animation.startAt;class K{constructor(t){this.animators=new Map,this._time=0,this.initialize(t)}initialize(t){this._currentValues={},this.animators=t.map(t=>t instanceof Q?t:Q.fromSimpleConfig(t)).map(t=>new f(t)),this.createCurrentValues(),this.animators.sort(J)}createCurrentValues(){this._currentValues=this.animators.reduce((t,e)=>{const n=e.animation.name,r=e.animation.property;let i=t[n];return null==i&&(i=t[n]={}),null==i[r]&&(i[r]=e.animation.result.clone()),t},{})}assignValue(t){const e=this._currentValues[t.name][t.property];e.value=t.result.value,e.graph=t.result.graph,e.graphHash=t.result.graphHash}saveCurrentValues(){const t=new Map,e=this.animators,n=e.length;for(let r=0;r<n;r++){const n=e[r].animation,i=`${n.name}|${n.property}`;t.has(i)||(t.set(i,!0),this.assignValue(n))}for(let t=0;t<n;t++){const n=e[t].animation;n.startAt<=this._time&&this.assignValue(n)}}render(t){return this._time=t,this.animators.forEach(e=>{e.render(t)}),this.saveCurrentValues(),this}getCurrentValues(){return this._currentValues}}const W={ACTIVE:1,STOPPED:0,DISPOSED:-1};class Y{constructor(t,e,n){this.type=t,this.callback=e,this.unbind=n,this.state=W.ACTIVE}notify(t){t.type===this.type&&this.callback(t)}stop(){this.state===W.ACTIVE&&(this.state=W.STOPPED)}start(){this.state!==W.DISPOSED&&(this.state=W.ACTIVE)}dispose(){this.state=W.DISPOSED,this.unbind()}}class Z extends Y{constructor(t,e,n){super(null,e,n),this.time=t}notify(t){if("number"==typeof t.lastProgress&&"number"==typeof t.progress){const e=Math.max(t.progress,t.lastProgress),n=Math.min(t.progress,t.lastProgress);this.time>=n&&this.time<=e&&this.callback(t)}}}class X{constructor(){this.observers=[]}observeTime(t,e){const n=new Z(t,e,()=>{const t=this.observers.indexOf(n);t>-1&&this.observers.splice(t,1)});return this.observers.push(n),n}observe(t,e){const n=new Y(t,e,()=>{const t=this.observers.indexOf(n);t>-1&&this.observers.splice(t,1)});return this.observers.push(n),n}notify(t){this.observers.forEach(e=>{e.notify(t)})}dispose(){this.observers=[]}}const tt=new class{constructor(){this.registeredCallbacks=new Map,this._tick=this._tick.bind(this),this.animationFrame=null}_tick(){this.registeredCallbacks.forEach(t=>{t()}),this.registeredCallbacks.size>0?this.animationFrame=requestAnimationFrame(this._tick):this.animationFrame=null}register(t){this.registeredCallbacks.set(t,t),null==this.animationFrame&&this._tick()}unregister(t){this.registeredCallbacks.delete(t)}now(){return performance.now()}},et=0,nt=1,rt=1,it=-1,ot=0,st={DEFAULT:et,ALTERNATE:nt},at={FORWARD:rt,REVERSE:it,STOPPED:ot};class ut extends X{constructor(t,{clock:e,duration:n,timeScale:r,repeatDirection:i}){super(),this._timeScale="number"==typeof r?r:1,this._time=0,this._step=0,this._duration=n,this._lastTimestamp=0,this._animationFrame=null,this._iterations=0,this._repeat=1,this._repeatDirection="number"==typeof i?i:et,this._timeline=t,this._clock=e||tt,this._state=ot,this.tick=this.tick.bind(this)}get time(){return this._time}get timeScale(){return this._timeScale}set timeScale(t){t>0&&(this._timeScale=t)}get duration(){return this._duration}set duration(t){"number"!=typeof t&&(t=0),t<=0&&(t=1e-5),this._duration=t}get repeat(){return this._repeat}set repeat(t){"number"!=typeof t&&t>0||(this._repeat=t)}get repeatDirection(){return this._repeatDirection}set repeatDirection(t){0!==t&1!==t||(this._repeatDirection=t)}get state(){return this._state}get timeline(){return this._timeline}set timeline(t){"function"==typeof t.render&&(this._timeline=t)}play(){this._state!==rt&&(this._lastTimestamp=this._clock.now(),this._state=rt,this._clock.register(this.tick),this.notify({type:"PLAYED",timeline:this._timeline}))}tick(){const t=this._clock.now(),e=t-this._lastTimestamp;this._step=e/this._duration*this._timeScale,this._step>1&&(this._step=1),0!==e&&(this._state===it?this.stepBackward():this._state===rt&&this.stepForward(),this._lastTimestamp=t)}stepForward(){let t=this._time+this._step;const e=this._repeatDirection;if(t>=1){if(this._iterations++,this._iterations>=this._repeat)return this.seek(1),void this.stop();e===nt?(t=1-(t-1),this.seek(t),this._state=it):(t-=1,this.seek(t),this._state=rt)}else this.seek(t)}setBackward(){let t=this._time-this._step;const e=this._repeatDirection;if(t<=0){if(this._iterations++,this._iterations>=this._repeat)return this.seek(0),void this.stop();e===nt?(t*=-1,this.seek(t),this._state=rt):(t=1+t,this.seek(t),this._state=it)}else this.seek(t)}seek(t){const e=this._time;this._time=t,this._timeline.render(this._time),this.notify({type:"RENDER",time:t,lastTime:e,timeline:this._timeline})}stop(){this._state!==ot&&(this._state=ot,this._clock.unregister(this.tick),this.notify({type:"STOPPED",timeline:this._timeline}))}reverse(){this._state!==it&&(this._lastTimestamp=this._clock.now(),this._state=it,this._clock.register(this.tick),this.notify({type:"REVERSED",timeline:this._timeline}))}dispose(){this.stop(),super.dispose()}static get repeatDirections(){return st}static get states(){return at}}n.d(e,"Timeline",(function(){return K})),n.d(e,"Player",(function(){return ut})),n.d(e,"Animator",(function(){return f})),n.d(e,"Animation",(function(){return Q})),n.d(e,"BezierCurve",(function(){return r})),n.d(e,"easings",(function(){return q}))}])}));